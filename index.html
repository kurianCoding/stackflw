<!DOCTYPE html>
<meta charset="utf-8">
<style>

.links line {
  stroke: #999;
  stroke-opacity: 0.6;
}

.nodes circle {
  stroke: #fff;
  stroke-width: 1.5px;
}

text {
  font-family: sans-serif;
  font-size: 10px;
}

</style>
<body>

</body>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script>

    function getData(url,method,foo){
	var xhttp=new XMLHttpRequest(); 
	xhttp.onreadystatechange=function(){
	    if (this.readyState==4&&this.status==200){
		foo(this);
	    }
	}
	xhttp.open(method,url,true);
	xhttp.send();
    }
var h=900;
var w=900;
    var svg=d3.select("body").append("svg").attr("height",h).attr("width",w);
getData(
"https://api.stackexchange.com/2.2/tags?order=desc&sort=popular&site=stackoverflow",
"GET",
    function(data){
	var dataset=JSON.parse(data.response).items;
	var elem=svg.selectAll("g").data(dataset).enter().append("g").attr("transform", function(d){return "translate("+(Math.random()*h)+","+(Math.random()*w/2)+")";});
	elem.on("mousedown",function(d){
	
	    console.log(d.name);//!error:no method found with this name
	var uri="https://api.stackexchange.com/2.2/tags/"+d.name+"/related?site=stackoverflow"
	getData(uri,
	    "GET",
	    function(data){
		 var dataset=JSON.parse(data.response).items;
		d3.selectAll("svg").remove();
		var svg=d3.select("body").append("svg").attr("height",h).attr("width",w);

		elem=svg.selectAll("g").data(dataset).enter().append("g").attr("transform", function(d){return "translate("+(Math.random()*h)+","+(Math.random()*w/2)+")";});

    	var circle=elem.append("circle")
	    .attr("r",function(d){return (d.count)/10000;})
	    .attr("fill","teal");


	elem.append("text").text(function(d){return d.name;}).attr("fill","red").attr("font-size","11px");

	    })

	})

	circle=elem.append("circle")
	    .attr("r",function(d){return (d.count)/100000;})
	    .attr("fill","teal");


	elem.append("text").text(function(d){return d.name;}).attr("fill","red").attr("font-size","11px");
}
);
    
</script>
